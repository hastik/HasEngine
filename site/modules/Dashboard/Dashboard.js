!function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function a(t){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(a){e(t,a,n[a])}))}return t}function n(t){$("a.tooltip, .pw-tooltip",t).tooltip({position:{my:"center bottom",at:"center top"}}).hover((function(){var t=$(this);t.is("a")?t.addClass("ui-state-hover"):(t.data("pw-tooltip-cursor",t.css("cursor")),t.css("cursor","pointer")),t.addClass("pw-tooltip-hover"),t.css("cursor","pointer")}),(function(){var t=$(this);t.removeClass("pw-tooltip-hover ui-state-hover"),t.is("a")||t.css("cursor",t.data("pw-tooltip-cursor"))}))}function r(t){$(".tooltip, .pw-tooltip",t).each((function(){$(this).removeClass("tooltip pw-tooltip"),UIkit.tooltip($(this))}))}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;"undefined"!=typeof UIkit?r(t):n(t)}var i=function(){"use strict";function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectors={panel:"[data-dashboard-panel]",tabs:"[data-dashboard-tabs]",tabLink:"[data-dashboard-tab]"}}var n,r,i;return n=e,r=[{key:"init",value:function(){var t=this;this.url=document.location.pathname+document.location.search,this.$panels=$(this.selectors.panel),this.$tabs=$(this.selectors.tabs),this.$panels.each((function(e,a){t.setupPanel($(a))})),this.$tabs.each((function(e,a){t.setupTabs($(a))})),this.setupReloadEvents(),this.setupAutoReload(),this.triggerDashboardReadyEvent()}},{key:"getPanelByKey",value:function(t){return this.$panels.filter("[data-key='".concat(t,"']")).first()}},{key:"triggerDashboardReadyEvent",value:function(){$(document).trigger("dashboard:ready")}},{key:"triggerPanelReadyEvent",value:function(t){return this.triggerPanelEvent(t,"panel")}},{key:"triggerPanelEvent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=parseInt(t.data("key"),10),o=t.data("panel"),i=a({$element:t,key:r,panel:o},n),s=$.Event("dashboard:".concat(e)),l=$.Event("dashboard:".concat(e,"(").concat(o,")"));$(document).trigger(s,[i]),$(document).trigger(l,[i]);var c=s.isDefaultPrevented()||l.isDefaultPrevented();return!c}},{key:"setupTabs",value:function(t){var e=t.find(this.selectors.tabLink),a=function(t,e){var a=$(t).attr("href");$(t).attr("aria-current",e?"true":"false"),$(a).attr("aria-hidden",e?"false":"true")},n=function(t){e.each((function(t,e){return a(e,!1)})),a(t,!0)};n(e.eq(0)),e.on("click",(function(t){t.preventDefault(),n(t.target)})),t.attr("data-cloak",null)}},{key:"setupPanel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&o(t),this.triggerPanelReadyEvent(t)}},{key:"setupReloadEvents",value:function(){var t=this;$(document).on("reload",this.selectors.panel,(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.animate,r=a.params;t.reloadPanel($(e.target),{animate:n,params:r})}))}},{key:"setupAutoReload",value:function(){this.$panels.each((function(t,e){var a=$(e),n=parseInt(a.data("key"),10),r=parseInt(a.data("interval"),10);n>=0&&r>0&&(r=Math.max(2e3,r),setInterval((function(){a.trigger("reload")}),r))}))}},{key:"reloadPanel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.animate,r=void 0!==n&&n,o=e.params,i=void 0===o?null:o,s=this;if(t.length){var l=parseInt(t.data("key"),10),c=t.data("panel"),u=a({dashboard:1,key:l,panel:c},i||{});$.post(this.url,u,null,"text").done((function(e){var a=s,n=$(e);if(s.triggerPanelEvent(t,"reload",{$new:n})){var o=function(){t.html(n.html()),t.prop("className",n.prop("className")),n.filter("script").each((function(t,e){$.globalEval(e.text||e.textContent||e.innerHTML||"")})),a.setupPanel(t,!0)};r?t.children().fadeOut(400,(function(){o(),t.children().fadeIn(400)})):o()}})).fail((function(){console.error("Error fetching panel contents")}))}}}],r&&t(n.prototype,r),i&&t(n,i),e}();$((function(){(new i).init()}))}();